var __extends=this&&this.__extends||function(){var o=function(e,t){o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return o(e,t)};return function(e,t){o(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var sunui;(function(r){var i;(function(e){e[e["NONE"]=0]="NONE";e[e["YES"]=1]="YES";e[e["NO"]=2]="NO";e[e["CANCEL"]=3]="CANCEL"})(i=r.ConfirmOptionValueEnum||(r.ConfirmOptionValueEnum={}));var u;(function(e){e[e["AUTO"]=16]="AUTO";e[e["CONFIRM"]=32]="CONFIRM";e[e["TERMINATE"]=64]="TERMINATE"})(u=r.RetryMethodEnum||(r.RetryMethodEnum={}));var c;(function(e){e[e["NONE"]=0]="NONE";e[e["BACKGROUND"]=1]="BACKGROUND";e[e["SCENE"]=2]="SCENE";e[e["PANEL"]=3]="PANEL";e[e["FLOAT"]=4]="FLOAT";e[e["GOLD_TIPS"]=5]="GOLD_TIPS";e[e["HIGH_GOLD_TIPS"]=6]="HIGH_GOLD_TIPS";e[e["NOTICE"]=7]="NOTICE";e[e["BIGWINNER"]=8]="BIGWINNER";e[e["MINI_GAME"]=9]="MINI_GAME";e[e["POPUP"]=10]="POPUP";e[e["WAITINGBOX"]=11]="WAITINGBOX";e[e["LOADING"]=12]="LOADING";e[e["LAMP_TIPS"]=13]="LAMP_TIPS";e[e["TIPS"]=14]="TIPS";e[e["TOP"]=15]="TOP";e[e["DEBUG"]=16]="DEBUG"})(c=r.UILevel||(r.UILevel={}));var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.$makeProps=function(e){if(e.x===void 0&&e.left===void 0&&e.right===void 0){e.centerX=0}if(e.y===void 0&&e.top===void 0&&e.bottom===void 0){e.centerY=0}if(suncore.System.isModuleStopped(suncore.ModuleEnum.CUSTOM)===true){e.mod=suncore.ModuleEnum.SYSTEM}};t.prototype.$applyShowProps=function(e,t,r){if(t.x!==void 0){e.x=t.x}if(t.y!==void 0){e.y=t.y}if(t.centerX!==void 0){e.centerX=t.centerX}if(t.centerY!==void 0){e.centerY=t.centerY}if(r===0){if(t.left!==void 0){e.left=t.left}if(t.right!==void 0){e.right=t.right}if(t.top!==void 0){e.top=t.top}if(t.bottom!==void 0){e.bottom=t.bottom}}else{if(t.left!==void 0){e.left=-e.width}if(t.right!==void 0){e.right=-e.width}if(t.top!==void 0){e.top=-e.height}if(t.bottom!==void 0){e.bottom=-e.height}if(t.left===void 0&&t.right===void 0&&t.top===void 0&&t.bottom===void 0){e.alpha=0;e.scaleX=0;e.scaleY=0;t.alpha=1;t.scaleX=1;t.scaleY=1}$.get(e,t.mod).to(t,r,t.ease)}};t.prototype.$applyCloseProps=function(e,t,r){if(r>0){if(t.left!==void 0){t.left=-e.width}if(t.right!==void 0){t.right=-e.width}if(t.top!==void 0){t.top=-e.height}if(t.bottom!==void 0){t.bottom=-e.height}if(t.left===void 0&&t.right===void 0&&t.top===void 0&&t.bottom===void 0){t.alpha=0;t.scaleX=0;t.scaleY=0}$.get(e,t.mod).to(t,r)}};return t}(puremvc.SimpleCommand);r.AbstractPopupCommand=e;var t=function(){function e(e,t){this.$loading=false;this.$complete=null;this.$destroyed=false;this.$url=null;this.$loaders=[];this.$doneCount=0;this.$url=e;this.$complete=t;A.lock(this.$url)}e.prototype.destroy=function(){if(this.$destroyed===true){return}this.$destroyed=true;for(var e=0;e<this.$loaders.length;e++){this.$loaders[e].destroy()}A.unlock(this.$url)};e.prototype.load=function(){if(this.$loading===false&&this.$destroyed===false){this.$loading=true;this.$doLoad()}};e.prototype.$loadAssets=function(e){this.$doneCount=this.$loaders.length;for(var t=0;t<e.length;t++){this.$loaders.push(new S(e[t],suncom.Handler.create(this,this.$onLoadAsset)))}};e.prototype.$onLoadAsset=function(e){if(e===false){this.$onAssetsLoaded(false)}else{this.$doneCount++;if(this.$doneCount===this.$loaders.length){this.$onAssetsLoaded(true)}}};e.prototype.$onComplete=function(e,t){if(t===void 0){t=null}if(this.$destroyed===false){this.$complete.runWith([e,t])}this.destroy();this.$loading=false};Object.defineProperty(e.prototype,"destroyed",{get:function(){return this.$destroyed},enumerable:true,configurable:true});return e}();r.AssetLoader=t;var O=function(n){__extends(e,n);function e(e,t,r){var o=n.call(this)||this;o.$url=null;o.$data=void 0;o.$complete=null;o.$loader=null;o.$retryer=new l(u.TERMINATE,suncom.Handler.create(o,o.$onRetryConfirmed),"资源加载失败，点击确定重新尝试！");o.$destroyed=false;o.$url=e;o.$data=r;o.$complete=t;o.$doLoad();return o}e.prototype.destroy=function(){if(this.$destroyed===true){return}this.$destroyed=true;this.$loader.destroy();this.$retryer.cancel()};e.prototype.$doLoad=function(){var e=suncom.Handler.create(this,this.$onLoad);if(A.isRes3dUrl(this.$url)===true){this.$loader=new s(this.$url,e)}else if(suncom.Common.getFileExtension(this.$url)==="sk"){this.$loader=new y(this.$url,e,this.$data)}else{this.$loader=new v(this.$url,e)}this.$loader.load()};e.prototype.$onLoad=function(e,t){if(e===true){this.$complete.runWith([t,this.$url])}else{this.$retryer.run(1e3,suncom.Handler.create(this,this.$doLoad),2)}this.$loader=null};e.prototype.$onRetryConfirmed=function(e){if(e===i.NO){this.$retryer.reset();suncom.Logger.warn("失败："+this.$url);this.facade.sendNotification(T.ON_ASSET_SAFETY_LOADER_FAILED);this.facade.registerObserver(T.ASSET_SAFETY_LOADER_RETRY,this.$onAssetSafetyLoaderRetry,this,true)}else{this.facade.sendNotification(suncore.NotifyKey.SHUTDOWN)}};e.prototype.$onAssetSafetyLoaderRetry=function(){if(this.$destroyed===false){suncom.Logger.warn("重试："+this.$url);this.$doLoad()}};Object.defineProperty(e.prototype,"complete",{get:function(){return this.$complete},enumerable:true,configurable:true});return e}(puremvc.Notifier);r.AssetSafetyLoader=O;var o=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.execute=function(e,t,r){var o=C.viewLayer.getInfoByView(e);if(o===null){suncom.Logger.error(e+"["+e.name+"]'s infomation is not exist.");return}if(r!==void 0){o.keepNode=!r}if(o.closed===true){return}o.closed=true;C.viewLayer.onViewClose(e);this.facade.sendNotification(T.ON_POPUP_CLOSED,e);this.$applyCloseProps(e,o.props,t);if(o.props.trans===false){var n=$.get(o.mask,o.props.mod);if(t>200){n.wait(t-200).to({alpha:0},200)}else{n.to({alpha:0},t)}}var i=suncom.Handler.create(this,this.$onCloseFinish,[e]);suncore.System.addTrigger(o.props.mod,t,i)};t.prototype.$onCloseFinish=function(e){C.viewLayer.removeStackByView(e)};return t}(e);r.ClosePopupCommand=o;var n=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.execute=function(e){for(var t=0;t<e.length;t++){var r=e[t];M.regScene(r)}};return t}(puremvc.SimpleCommand);r.RegisterScenesCommand=n;var s=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.$doLoad=function(){var e=A.getRes3dJsonUrl(this.$url);var t=Laya.loader.getRes(this.$url)===void 0?false:true;if(suncom.Common.getFileExtension(this.$url)==="ls"||t===true){this.$loadAssets([e])}else{this.$loaders.push(new S(e,suncom.Handler.create(this,this.$onUrlLoaded)))}};t.prototype.$onUrlLoaded=function(e,t){if(e===true){var r=C.cacheMap[this.$url]||null;if(r===null){this.$loadAssets([this.$url])}else{this.$onAssetsLoaded(true)}}else{this.$onComplete(false)}};t.prototype.$onAssetsLoaded=function(e){if(suncom.Common.getFileExtension(this.$url)==="ls"){this.$onComplete(e)}else{var t=C.cacheMap[this.$url]||null;if(t===null){t=C.cacheMap[this.$url]=Laya.loader.getRes(this.$url)}this.$onComplete(e,e===false?null:Laya.Sprite3D.instantiate(t))}};return t}(t);r.Res3dLoader=s;var a=function(t){__extends(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;e.$undoList=[];e.$loadingList=[];e.$cacheLoaders={};e.$isRetryPrompting=false;return e}r.prototype.$onRun=function(){this.facade.registerObserver(T.ON_URL_SAFETY_LOADER_CREATED,this.$onUrlSafetyLoaderCreated,this);this.facade.registerObserver(T.ON_URL_SAFETY_LOADER_COMPLETE,this.$onUrlSafetyLoaderComplete,this);this.facade.registerObserver(T.CACHE_ASSET_SAFETY_LOADER,this.$onCacheAssetSafetyLoader,this);this.facade.registerObserver(T.REMOVE_ASSET_SAFETY_LOADER,this.$onRemoveAssetSafetyLoader,this);this.facade.registerObserver(T.ON_ASSET_SAFETY_LOADER_FAILED,this.$onAssetSafetyLoaderFailed,this)};r.prototype.$onStop=function(){this.facade.removeObserver(T.ON_URL_SAFETY_LOADER_CREATED,this.$onUrlSafetyLoaderCreated,this);this.facade.removeObserver(T.ON_URL_SAFETY_LOADER_COMPLETE,this.$onUrlSafetyLoaderComplete,this);this.facade.removeObserver(T.CACHE_ASSET_SAFETY_LOADER,this.$onCacheAssetSafetyLoader,this);this.facade.removeObserver(T.REMOVE_ASSET_SAFETY_LOADER,this.$onRemoveAssetSafetyLoader,this);this.facade.removeObserver(T.ON_ASSET_SAFETY_LOADER_FAILED,this.$onAssetSafetyLoaderFailed,this)};r.prototype.$onUrlSafetyLoaderCreated=function(e){this.$undoList.push(e);this.$next()};r.prototype.$onUrlSafetyLoaderComplete=function(e){var t=this.$loadingList.indexOf(e);if(t>-1){this.$loadingList.splice(t,1);this.$next()}};r.prototype.$next=function(){while(this.$undoList.length>0&&this.$loadingList.length<r.MAX_LOAD_COUNT){var e=this.$undoList.shift();if(e.destroyed===false){e.load();this.$loadingList.push(e)}}};r.prototype.$onCacheAssetSafetyLoader=function(e,t){var r=this.$cacheLoaders[e]||null;if(r===null){r=this.$cacheLoaders[e]=[]}r.push(t);A.lock(e)};r.prototype.$onRemoveAssetSafetyLoader=function(e,t,r,o){var n=this.$cacheLoaders[e]||null;if(n===null){return}var i=-1;if(t===null){for(var s=0;s<n.length;s++){var a=n[s];if(a.complete.method===r&&a.complete.caller===o){i=s;break}}}else{i=n.indexOf(t)}if(i>-1){n.splice(i,1);if(n.length===0){delete this.$cacheLoaders[e]}A.unlock(e)}};r.prototype.$onAssetSafetyLoaderFailed=function(){if(this.$isRetryPrompting===false){this.$isRetryPrompting=true;this.facade.sendNotification(T.RETRY_CONFIRM,[suncore.ModuleEnum.SYSTEM,"资源加载失败，点击确定重新尝试！",[i.YES,"确定",i.NO,"取消"],suncom.Handler.create(this,this.$onRetryConfirmed)])}};r.prototype.$onRetryConfirmed=function(e){if(e===i.YES){this.facade.sendNotification(T.ASSET_SAFETY_LOADER_RETRY)}else{this.facade.sendNotification(suncore.NotifyKey.SHUTDOWN)}this.$isRetryPrompting=false};r.MAX_LOAD_COUNT=5;return r}(suncore.BaseService);r.ResourceService=a;var l=function(a){__extends(e,a);function e(e,t,r){if(t===void 0){t=null}if(r===void 0){r=null}var o=[];for(var n=3;n<arguments.length;n++){o[n-3]=arguments[n]}var i=a.call(this,suncore.MsgQModEnum.MMI)||this;i.$options=[];i.$currentRetries=0;i.$retryHandler=null;i.$retryTimerId=0;i.$prompting=false;if((e&u.CONFIRM)===u.CONFIRM){i.$method=u.CONFIRM}else if((e&u.TERMINATE)===u.TERMINATE){i.$method=u.TERMINATE}else{i.$method=u.AUTO}var s=e&=15;if(e===suncore.ModuleEnum.CUSTOM||e===suncore.ModuleEnum.TIMELINE){i.$mod=e}else{i.$mod=suncore.ModuleEnum.SYSTEM}i.$prompt=r;i.$options=o;i.$confirmHandler=t;return i}e.prototype.run=function(e,t,r){if(r===void 0){r=2}if(this.$method===u.AUTO||this.$currentRetries<r){if(this.$retryTimerId===0){this.$retryHandler=t;this.$retryTimerId=suncore.System.addTimer(suncore.ModuleEnum.SYSTEM,e,this.$onRetryTimer,this)}else{suncom.Logger.warn("己忽略的重试请求 method:"+suncom.Common.getMethodName(t.method,t.caller)+", caller:"+suncom.Common.getQualifiedClassName(t.caller))}}else{if(this.$prompting===false){this.$prompting=true;if(this.$method===u.TERMINATE){var o=suncom.Handler.create(this,this.$onConfirmReplied,[i.NO]);suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_0,o)}else{var n=suncom.Handler.create(this,this.$onConfirmReplied);this.facade.sendNotification(T.RETRY_CONFIRM,[this.$mod,this.$prompt,this.$options,n])}}else{suncom.Logger.warn("己忽略的重试的询问请求 prompt:"+this.$prompt)}}};e.prototype.$onConfirmReplied=function(e){if(this.$prompting===true){this.$prompting=false;if(this.$confirmHandler!==null){this.$confirmHandler.runWith(e)}}};e.prototype.$onRetryTimer=function(){this.$retryTimerId=0;this.$currentRetries++;this.$retryHandler.run()};e.prototype.cancel=function(){this.$prompting=false;this.$retryTimerId=suncore.System.removeTimer(this.$retryTimerId)};e.prototype.reset=function(){this.$currentRetries=0};Object.defineProperty(e.prototype,"currentRetries",{get:function(){return this.$currentRetries},enumerable:true,configurable:true});return e}(puremvc.Notifier);r.Retryer=l;var f=function(o){__extends(e,o);function e(e,t){var r=o.call(this)||this;r.$info=null;r.$info=e;r.$data=t;r.facade.registerObserver(T.ENTER_SCENE,r.$onEnterScene,r,true);return r}e.prototype.$onEnterScene=function(){};return e}(suncore.AbstractTask);r.SceneIniClass=f;var d=function(t){__extends(e,t);function e(){var e=t.call(this)||this;e.$ready=true;e.$sceneName=0;e.$scene2d=null;e.$scene3d=null;e.facade.registerObserver(T.ENTER_SCENE,e.$onEnterScene,e,false,5);return e}e.prototype.$enterScene=function(e,t){var r=M.getConfigByName(e);suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_LAZY,suncom.Handler.create(this,this.$beforeLoadScene,[r,t]));suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_LAZY,suncom.Handler.create(this,this.$loadScene,[r,t]))};e.prototype.$beforeLoadScene=function(e,t){this.$sceneName=e.name;this.facade.sendNotification(T.BEFORE_LOAD_SCENE);e.iniCls&&suncore.System.addTask(suncore.ModuleEnum.SYSTEM,0,new e.iniCls(e,t))};e.prototype.$loadScene=function(e,t){this.facade.sendNotification(suncore.NotifyKey.START_TIMELINE,[suncore.ModuleEnum.CUSTOM,true]);e.scene3d=e.scene3d||null;this.facade.sendNotification(T.LOAD_SCENE,[e,t])};e.prototype.$onEnterScene=function(e,t){this.$ready=true;this.$scene2d=e||null;this.$scene3d=t||null;this.facade.sendNotification(suncore.NotifyKey.START_TIMELINE,[suncore.ModuleEnum.CUSTOM,false])};e.prototype.$exitScene=function(){this.facade.sendNotification(T.EXIT_SCENE,this.$sceneName);this.facade.sendNotification(suncore.NotifyKey.PAUSE_TIMELINE,[suncore.ModuleEnum.CUSTOM,true]);var e=M.getConfigByName(this.$sceneName);suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_LAZY,suncom.Handler.create(this,this.$onLeaveScene,[e]))};e.prototype.$onLeaveScene=function(e){e.uniCls&&suncore.System.addTask(suncore.ModuleEnum.SYSTEM,0,new e.uniCls(e));this.facade.sendNotification(T.LEAVE_SCENE);this.facade.sendNotification(T.UNLOAD_SCENE,[e,this.$scene2d,this.$scene3d]);this.facade.sendNotification(T.DESTROY_SCENE,[e]);suncore.System.addTask(suncore.ModuleEnum.SYSTEM,0,new suncore.SimpleTask(suncom.Handler.create(this,this.$onExitScene)))};e.prototype.$onExitScene=function(){this.$sceneName=0};e.prototype.enterScene=function(e,t){if(this.$ready===false){return false}this.$ready=false;this.$sceneName!=0&&this.$exitScene();this.$enterScene(e,t);P.addHistory(e,t);return true};e.prototype.exitScene=function(){if(this.$ready===false){return}this.$ready=false;this.$sceneName!=0&&this.$exitScene();P.removeHistory(this.$sceneName);var e=P.pop();e!==null&&this.$enterScene(e.name,e.data)};e.prototype.replaceScene=function(e,t){var r=P.pop();if(this.enterScene(e,t)===true){r!==null&&P.removeHistory(r.name)}};e.prototype.deleteHistories=function(e){P.deleteHistories(e)};Object.defineProperty(e.prototype,"scene2d",{get:function(){return this.$scene2d},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene3d",{get:function(){return this.$scene3d},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sceneName",{get:function(){return this.$ready===false?0:this.$sceneName},enumerable:true,configurable:true});return e}(puremvc.Notifier);r.SceneLayer=d;var h=function(r){__extends(e,r);function e(e){var t=r.call(this)||this;t.$info=null;t.$info=e;t.facade.registerObserver(T.LEAVE_SCENE,t.$onLeaveScene,t,true);return t}e.prototype.$onLeaveScene=function(){};return e}(suncore.AbstractTask);r.SceneUniClass=h;var p=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.execute=function(e,t,r){if(C.viewLayer.getInfoByView(e)!==null){suncom.Logger.error(e+"["+e.name+"] is already popup.");return}if(r.mod===void 0){r.mod=suncore.ModuleEnum.CUSTOM}if(r.ease===void 0){r.ease=Laya.Ease.backOut}if(r.trans===void 0){r.trans=false}if(r.keepNode===void 0){r.keepNode=false}var o=r.args;var n=r.trans;var i=r.level||e.zOrder||c.POPUP;var s=r.keepNode;delete r.args;delete r.level;delete r.keepNode;this.$makeProps(r);var a=C.viewLayer.createMask(e,n);a.name="Mask$"+e.name;a.zOrder=e.zOrder=i;var u={view:e,mask:a,props:r,closed:false,keepNode:s,displayed:false,duration:t,cancelAllowed:false};C.viewLayer.addToStack(u);C.viewLayer.addChild(a);C.viewLayer.addChild(e);e["pivot"](e.width*.5,e.height*.5);C.viewLayer.onViewCreate(e,o);if(o===void 0){this.facade.sendNotification(T.ON_POPUP_CREATED,e)}else if(o instanceof Array){this.facade.sendNotification(T.ON_POPUP_CREATED,[e].concat(o))}else{this.facade.sendNotification(T.ON_POPUP_CREATED,[e,o])}this.$applyShowProps(e,r,t);if(n===false){$.get(a,u.props.mod).from({alpha:0},t>200?200:t)}var l=suncom.Handler.create(this,this.$onPopupFinish,[e]);suncore.System.addTrigger(u.props.mod,t,l)};t.prototype.$onPopupFinish=function(e){var t=C.viewLayer.getInfoByView(e);if(t!==null&&t.closed===false){t.displayed=true;C.viewLayer.onViewOpen(e);this.facade.sendNotification(T.ON_POPUP_OPENED,e)}};return t}(e);r.ShowPopupCommand=p;var y=function(n){__extends(e,n);function e(e,t,r){if(r===void 0){r=0}var o=n.call(this,e,t)||this;o.$aniMode=0;o.$aniMode=r;return o}e.prototype.$doLoad=function(){this.$loadAssets([this.$url,suncom.Common.replacePathExtension(this.$url,"png")])};e.prototype.$onAssetsLoaded=function(e){if(e===true){var t=C.cacheMap[this.$url]||null;if(t===null){t=C.cacheMap[this.$url]=new Laya.Templet;t.on(Laya.Event.COMPLETE,this,this.$onTempletCreated);t.loadAni(this.$url)}else if(t.isParserComplete===false){t.on(Laya.Event.COMPLETE,this,this.$onTempletCreated)}else{var r=suncom.Handler.create(this,this.$onTempletCreated);suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_0,r)}A.lock(this.$url)}else{this.$onComplete(false)}};e.prototype.$onTempletCreated=function(){if(this.destroyed===false){var e=C.cacheMap[this.$url];this.$onComplete(true,e.buildArmature(this.$aniMode))}A.unlock(this.$url)};return e}(t);r.SkeletonLoader=y;var _=function(){function e(e,t,r){this.$id=0;this.$urls=null;this.$handler=null;this.$doneList=[];this.$id=e;this.$urls=this.$removeDuplicateResources(t);this.$handler=r;this.$removeUnnecessaryResources(this.$urls,"sk","png","龙骨预加载无需指定PNG资源");this.$removeUnnecessaryResources(this.$urls,"atlas","png","图集预加载无需指定PNG资源");for(var o=0;o<this.$urls.length;o++){var n=this.$urls[o];A.create(n,this.$onResourceCreated,this)}}e.prototype.$onResourceCreated=function(e,t){if(e instanceof Laya.Skeleton||e instanceof Laya.Scene3D||e instanceof Laya.Sprite3D){e.destroy()}this.$doneList.push(t);if(this.$doneList.length===this.$urls.length){this.$handler.runWith([this.$id])}};e.prototype.release=function(){for(var e=0;e<this.$urls.length;e++){var t=this.$urls[e];A.destroy(t,this.$onResourceCreated,this)}};e.prototype.$removeDuplicateResources=function(e){if(suncom.Global.debugMode&suncom.DebugMode.ENGINE){var t=[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)===-1){t.push(o)}else{suncom.Logger.error("重复的预加载资源文件 "+o)}}return t}return e};e.prototype.$removeUnnecessaryResources=function(e,t,r,o){if(suncom.Global.debugMode&suncom.DebugMode.ENGINE){var n=[];for(var i=0;i<e.length;i++){var s=e[i];if(suncom.Common.getFileExtension(s)===t){n.push(s)}}for(var i=0;i<n.length;i++){var s=n[i];var a=s.substring(0,s.length-t.length)+r;do{var u=e.indexOf(a);if(u===-1){break}e.splice(u,1);suncom.Logger.warn(o+" "+s)}while(true)}}};return e}();r.Templet=_;var $=function(o){__extends(r,o);function r(e,t){var r=o.call(this)||this;r.$infos=[];r.$props=null;r.$mod=t;r.$item=e;if(suncore.System.isModuleStopped(t)===false){r.facade.sendNotification(T.ADD_TWEEN_OBJECT,r)}else{suncom.Logger.error("尝试添加缓动，但时间轴己停止，mod:"+suncore.ModuleEnum[t])}return r}r.prototype.cancel=function(){this.$props=null;this.$infos.length=0;return this};r.prototype.to=function(e,t,r,o){if(r===void 0){r=null}if(o===void 0){o=null}var n=Object.keys(e);var i=this.$props===null?this.$item:this.$props;this.$createTweenInfo(n,i,e,t,r,o);return this};r.prototype.from=function(e,t,r,o){if(r===void 0){r=null}if(o===void 0){o=null}var n=Object.keys(e);var i=this.$props===null?this.$item:this.$props;this.$createTweenInfo(n,e,i,t,r,o);return this};r.prototype.by=function(e,t,r,o){if(r===void 0){r=null}if(o===void 0){o=null}var n=Object.keys(e);var i=this.$props===null?this.$item:this.$props;for(var s=0;s<n.length;s++){var a=n[s];if(this.$props===null||this.$props[a]===void 0){e[a]+=this.$item[a]}else{e[a]+=i[a]}}this.to(e,t,r,o);return this};r.prototype.$createTweenInfo=function(e,t,r,o,n,i){this.$props=this.$props||{};var s=[];for(var a=0;a<e.length;a++){var u=e[a];var l={prop:u,from:t[u],to:r[u]};if(l.from===void 0){l.from=this.$item[u]}s.push(l);this.$props[u]=r[u];if(this.$infos.length===0){this.$item[l.prop]=l.from}}var c={ease:n,actions:s,handler:i,time:suncore.System.getModuleTimestamp(this.$mod),duration:o};this.$infos.push(c)};r.prototype.wait=function(e,t){if(t===void 0){t=null}var r={ease:null,actions:[],handler:t,time:suncore.System.getModuleTimestamp(this.$mod),duration:e};this.$infos.push(r);return this};r.prototype.doAction=function(){var e=suncore.System.getModuleTimestamp(this.$mod);var t=this.$infos[0];if(this.$item instanceof Laya.Node&&this.$item.destroyed===true){this.cancel();return}var r=false;var o=e-t.time;if(o>t.duration){r=true;o=t.duration}var n=t.ease||this.$easeNone;for(var i=0;i<t.actions.length;i++){var s=t.actions[i];if(r===true){this.$item[s.prop]=s.to}else{this.$item[s.prop]=n(o,s.from,s.to-s.from,t.duration)}}if(r===false){return}this.$infos.shift();if(this.$infos.length>0){this.$infos[0].time=suncore.System.getModuleTimestamp(this.$mod)}t.handler!==null&&t.handler.run()};r.prototype.$easeNone=function(e,t,r,o){var n=e/o;if(n>1){n=1}return n*r+t};Object.defineProperty(r.prototype,"mod",{get:function(){return this.$mod},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"canceled",{get:function(){return this.$infos.length===0},enumerable:true,configurable:true});r.get=function(e,t){if(t===void 0){t=suncore.ModuleEnum.CUSTOM}return new r(e,t)};return r}(puremvc.Notifier);r.Tween=$;var E=function(t){__extends(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.$tweens=[false];return e}e.prototype.$onRun=function(){this.facade.registerObserver(T.ADD_TWEEN_OBJECT,this.$onAddTweenObject,this);this.facade.registerObserver(suncore.NotifyKey.PAUSE_TIMELINE,this.$onTimelinePause,this)};e.prototype.$onStop=function(){this.facade.removeObserver(T.ADD_TWEEN_OBJECT,this.$onAddTweenObject,this);this.facade.removeObserver(suncore.NotifyKey.PAUSE_TIMELINE,this.$onTimelinePause,this)};e.prototype.$frameLoop=function(){var e=this.$tweens;this.$tweens[0]=true;for(var t=suncore.ModuleEnum.MIN;t<suncore.ModuleEnum.MAX;t++){if(suncore.System.isModulePaused(t)===false){for(var r=e.length-1;r>0;r--){var o=e[r];if(o.mod===t&&o.canceled===false){o.doAction()}}}}this.$tweens[0]=false;for(var r=this.$tweens.length-1;r>0;r--){var o=this.$tweens[r];if(o.canceled===true){e.splice(r,1)}}};e.prototype.$onTimelinePause=function(e,t){if(t===true){for(var r=1;r<this.$tweens.length;r++){var o=this.$tweens[r];if(o.mod===e){o.cancel()}}}};e.prototype.$onAddTweenObject=function(e){if(this.$tweens[0]===true){this.$tweens=this.$tweens.slice(0);this.$tweens[0]=false}this.$tweens.push(e)};return e}(suncore.BaseService);r.TweenService=E;var m=function(t){__extends(e,t);function e(){var e=t.call(this)||this;C.viewLayer=new R;C.sceneLayer=new d;suncom.DBService.put(-1,new E).run();suncom.DBService.put(-1,new a).run();e.facade.registerCommand(T.SHOW_POPUP,p);e.facade.registerCommand(T.CLOSE_POPUP,o);return e}e.getInstance=function(){if(e.$inst===null){e.$inst=new e}return e.$inst};e.prototype.enterScene=function(e,t){suncore.Mutex.backup(this);C.sceneLayer.enterScene(e,t);suncore.Mutex.restore()};e.prototype.exitScene=function(){suncore.Mutex.backup(this);C.sceneLayer.exitScene();suncore.Mutex.restore()};e.prototype.replaceScene=function(e,t){suncore.Mutex.backup(this);C.sceneLayer.replaceScene(e,t);suncore.Mutex.restore()};e.prototype.deleteHistories=function(e){C.sceneLayer.deleteHistories(e)};e.prototype.removeView=function(e){C.viewLayer.removeStackByView(e)};Object.defineProperty(e.prototype,"scene2d",{get:function(){return C.sceneLayer.scene2d},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene3d",{get:function(){return C.sceneLayer.scene3d},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sceneName",{get:function(){return C.sceneLayer.sceneName},enumerable:true,configurable:true});e.$inst=null;return e}(puremvc.Notifier);r.UIManager=m;var v=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.$doLoad=function(){this.$loadAssets([this.$url])};t.prototype.$onAssetsLoaded=function(e){this.$onComplete(e)};return t}(t);r.UrlLoader=v;var S=function(o){__extends(e,o);function e(e,t){var r=o.call(this)||this;r.$url=null;r.$complete=null;r.$loading=false;r.$destroyed=false;r.$url=e;r.$complete=t;r.facade.sendNotification(T.ON_URL_SAFETY_LOADER_CREATED,r);return r}e.prototype.destroy=function(){this.$destroyed=true};e.prototype.load=function(){if(this.$loading===false&&this.$destroyed===false){this.$loading=true;w.lock(this.$url);if(A.isRes3dUrl(this.$url)===false||A.getRes3dJsonUrl(this.$url)===this.$url){Laya.loader.load(this.$url,Laya.Handler.create(this,this.$onComplete))}else{Laya.loader.create(this.$url,Laya.Handler.create(this,this.$onComplete))}}};e.prototype.$onComplete=function(e){if(this.$destroyed===false){this.$destroyed=true;this.$complete.runWith([e===null?false:true,this.$url])}this.facade.sendNotification(T.ON_URL_SAFETY_LOADER_COMPLETE,this);w.unlock(this.$url);this.$loading=false};Object.defineProperty(e.prototype,"destroyed",{get:function(){return this.$destroyed},enumerable:true,configurable:true});return e}(puremvc.Notifier);r.UrlSafetyLoader=S;var g=function(n){__extends(e,n);function e(e,t){var r=n.call(this)||this;r.$closedHandler=null;r.$removedHandler=null;r.$popup=t;r.$caller=e;if(C.viewLayer.getInfoByView(t)===null){throw Error("找不到"+t.name+"的弹出信息，请确认其为弹出对象")}r.facade.registerObserver(T.ON_POPUP_CLOSED,r.$onPopupClosed,r);r.facade.registerObserver(T.ON_POPUP_REMOVED,r.$onPopupRemoved,r);r.facade.registerObserver(T.EXIT_SCENE,r.$onCallerDestroy,r);var o=C.viewLayer.getInfoByView(e);if(o!==null){r.facade.registerObserver(T.ON_POPUP_REMOVED,r.$onCallerDestroy,r)}else{r.facade.registerObserver(T.ON_CALLER_DESTROYED,r.$onCallerDestroy,r)}return r}e.prototype.$onExitScene=function(){this.$onCallerDestroy(this.$caller)};e.prototype.$onCallerDestroy=function(e){if(e===this.$caller){this.facade.removeObserver(T.ON_POPUP_CLOSED,this.$onPopupClosed,this);this.facade.removeObserver(T.ON_POPUP_REMOVED,this.$onPopupRemoved,this);this.facade.removeObserver(T.EXIT_SCENE,this.$onCallerDestroy,this);this.facade.removeObserver(T.ON_POPUP_REMOVED,this.$onCallerDestroy,this);this.facade.removeObserver(T.ON_CALLER_DESTROYED,this.$onCallerDestroy,this)}};e.prototype.$onPopupClosed=function(e){if(e===this.$popup){if(this.$closedHandler!==null){this.$closedHandler.run();this.$closedHandler=null}if(this.$removedHandler===null){this.$onCallerDestroy(this.$caller)}}};e.prototype.$onPopupRemoved=function(e){if(e===this.$popup){if(this.$removedHandler!==null){this.$removedHandler.run();this.$removedHandler=null}this.$onCallerDestroy(this.$caller)}};e.prototype.onPopupClosed=function(e,t,r){if(this.$caller!==t){throw Error("caller与执行者不一致")}if(this.$closedHandler===null){this.$closedHandler=suncom.Handler.create(t,e,r)}else{throw Error("重复注册弹框关闭事件")}return this};e.prototype.onPopupRemoved=function(e,t,r){if(this.$caller!==t){throw Error("caller与执行者不一致")}if(this.$removedHandler===null){this.$removedHandler=suncom.Handler.create(t,e,r)}else{throw Error("重复注册弹框移除事件")}return this};return e}(puremvc.Notifier);r.ViewContact=g;var N=function(o){__extends(e,o);function e(e,t){var r=o.call(this)||this;r.$info=null;r.$view=e;if(r.info!==null){r.$duration=r.info.duration}else if(t===void 0){r.$duration=200}else{r.$duration=t}return r}e.prototype.popup=function(e){if(e===void 0){e={}}this.facade.sendNotification(T.SHOW_POPUP,[this.$view,this.$duration,e]);return this};e.prototype.close=function(e){this.facade.sendNotification(T.CLOSE_POPUP,[this.$view,this.$duration,e])};Object.defineProperty(e.prototype,"cancelAllowed",{get:function(){return this.info.cancelAllowed},set:function(e){this.info.cancelAllowed=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"info",{get:function(){if(this.$info===null){this.$info=C.viewLayer.getInfoByView(this.$view)}return this.$info},enumerable:true,configurable:true});return e}(puremvc.Notifier);r.ViewFacade=N;var L=function(t){__extends(e,t);function e(){var e=t.call(this)||this;e.$stack=[];e.facade.registerObserver(T.UNLOAD_SCENE,e.$onUnloadScene,e,false,0);return e}e.prototype.$onUnloadScene=function(){var e=this.$stack.concat();for(var t=e.length-1;t>-1;t--){var r=e[t];if(r.props.mod!==suncore.ModuleEnum.SYSTEM){this.removeStackInfo(r)}}};e.prototype.removeStackInfo=function(e){var t=this.$stack.indexOf(e);if(t<0){return}this.$stack.splice(t,1);this.facade.sendNotification(T.BEFORE_POPUP_REMOVE,e.view);this.onViewRemove(e.view);this.removeChild(e.view);this.removeChild(e.mask);if(e.keepNode===false){this.destroyView(e.view);this.destroyMask(e.mask)}this.facade.sendNotification(T.ON_POPUP_REMOVED,e.view)};e.prototype.getInfoByView=function(e){for(var t=0;t<this.$stack.length;t++){var r=this.$stack[t];if(r.view===e){return r}}return null};e.prototype.addToStack=function(e){this.$stack.push(e)};e.prototype.removeStackByView=function(e){for(var t=0;t<this.$stack.length;t++){var r=this.$stack[t];if(r.view===e){this.removeStackInfo(r);break}}};return e}(puremvc.Notifier);r.ViewLayer=L;var R=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.addChild=function(e){var t=e;if(C.sceneLayer.scene2d===null||e.zOrder>=r.UILevel.LOADING){Laya.stage.addChild(t)}else{C.sceneLayer.scene2d.addChild(t)}};t.prototype.removeChild=function(e){var t=e;var r=t.parent||null;if(r===null){throw Error("无法移除显示对象，因为父节点不存在 "+t.name)}r.removeChild(t)};t.prototype.createMask=function(e,t){var r=new Laya.Image("common/mask.png");r.left=r.right=r.top=r.bottom=0;r.sizeGrid="1,1,1,1";r.alpha=t===true?0:1;r.mouseEnabled=true;r.mouseThrough=false;r.on(Laya.Event.CLICK,this,this.$onMaskClick,[e]);return r};t.prototype.$onMaskClick=function(e){var t=C.viewLayer.getInfoByView(e);if(t!==null&&t.closed===false&&t.cancelAllowed===true){new N(e).close()}};t.prototype.destroyMask=function(e){e.off(Laya.Event.CLICK,this,this.$onMaskClick);e.destroy()};t.prototype.onViewCreate=function(e,t){var r=e.getComponents(Laya.Component)||[];for(var o=0;o<r.length;o++){var n=r[o];if(n.$onCreate){if(t instanceof Array===false){n.$onCreate.call(n,t)}else{n.$onCreate.apply(n,t)}}}};t.prototype.onViewOpen=function(e){var t=e.getComponents(Laya.Component)||[];for(var r=0;r<t.length;r++){var o=t[r];if(o.$onOpen){o.$onOpen.call(o)}}};t.prototype.onViewClose=function(e){var t=e.getComponents(Laya.Component)||[];for(var r=0;r<t.length;r++){var o=t[r];if(o.$onClose){o.$onClose.call(o)}}};t.prototype.onViewRemove=function(e){var t=e.getComponents(Laya.Component)||[];for(var r=0;r<t.length;r++){var o=t[r];if(o.$onRemove){o.$onRemove.call(o)}}};t.prototype.destroyView=function(e){var t=e;t.destroy()};return t}(L);r.ViewLayerLaya3D=R;var C;(function(e){e.cacheMap={};e.templets={};e.references={}})(C=r.M||(r.M={}));var T;(function(e){e.LOAD_SCENE="sunui.NotifyKey.LOAD_SCENE";e.UNLOAD_SCENE="sunui.NotifyKey.UNLOAD_SCENE";e.DESTROY_SCENE="sunui.NotifyKey.DESTROY_SCENE";e.BEFORE_LOAD_SCENE="sunui.NotifyKey.BEFORE_LOAD_SCENE";e.REGISTER_SCENES="sunui.NotifyKey.REGISTER_SCENES";e.ENTER_SCENE="sunui.NotifyKey.ENTER_SCENE";e.EXIT_SCENE="sunui.NotifyKey.EXIT_SCENE";e.LEAVE_SCENE="sunui.NotifyKey.LEAVE_SCENE";e.ADD_TWEEN_OBJECT="sunui.NotifyKey.ADD_TWEEN_OBJECT";e.SHOW_POPUP="sunui.NotifyKey.SHOW_POPUP";e.CLOSE_POPUP="sunui.NotifyKey.CLOSE_POPUP";e.APPLY_POPUP_METHOD="sunui.NotifyKey.APPLY_POPUP_METHOD";e.ON_POPUP_CREATED="sunui.NotifyKey.ON_POPUP_CREATED";e.ON_POPUP_OPENED="sunui.NotifyKey.ON_POPUP_OPENED";e.ON_POPUP_CLOSED="sunui.NotifyKey.ON_POPUP_CLOSED";e.BEFORE_POPUP_REMOVE="sunui.NotifyKey.BEFORE_POPUP_REMOVE";e.ON_POPUP_REMOVED="sunui.NotifyKey.ON_POPUP_REMOVED";e.ON_CALLER_DESTROYED="sunui.NotifyKey.ON_CALLER_DESTROYED";e.RETRY_CONFIRM="sunui.NotifyKey.RETRY_CONFIRM";e.CACHE_ASSET_SAFETY_LOADER="sunui.NotifyKey.CACHE_ASSET_SAFETY_LOADER";e.REMOVE_ASSET_SAFETY_LOADER="sunui.NotifyKey.REMOVE_ASSET_SAFETY_LOADER";e.ON_ASSET_SAFETY_LOADER_FAILED="sunui.NotifyKey.ON_ASSET_SAFETY_LOADER_FAILED";e.ASSET_SAFETY_LOADER_RETRY="sunui.NotifyKey.ASSET_SAFETY_LOADER_RETRY";e.ON_URL_SAFETY_LOADER_CREATED="sunui.NotifyKey.ON_URL_SAFETY_LOADER_CREATED";e.ON_URL_SAFETY_LOADER_COMPLETE="sunui.NotifyKey.ON_URL_SAFETY_LOADER_COMPLETE"})(T=r.NotifyKey||(r.NotifyKey={}));var A;(function(i){var e=0;i.res3dRoot=null;function s(){e++;return e}function t(e){if(suncom.Global.debugMode&suncom.DebugMode.ENGINE){if(i.isRes3dUrl(e)===true&&i.getRes3dJsonUrl(e)===e){return}}var t=suncom.Common.getFileExtension(e);var r=e.substr(0,e.length-t.length);var o=[e];if(t==="sk"||t==="atlas"){o.push(r+"png")}else if(i.isRes3dUrl(e)===true){o.push(r+"json")}for(var n=0;n<o.length;n++){w.lock(o[n])}}i.lock=t;function r(e){if(suncom.Global.debugMode&suncom.DebugMode.ENGINE){if(i.isRes3dUrl(e)===true&&i.getRes3dJsonUrl(e)===e){return}}var t=suncom.Common.getFileExtension(e);var r=e.substr(0,e.length-t.length);var o=[e];if(t==="sk"||t==="atlas"){o.push(r+"png")}else if(i.isRes3dUrl(e)===true){o.push(r+"json")}for(var n=0;n<o.length;n++){w.unlock(o[n])}}i.unlock=r;function o(e,t,r,o){if(t===void 0){t=null}if(r===void 0){r=null}var n=new O(e,suncom.Handler.create(r,t),o);puremvc.Facade.getInstance().sendNotification(T.CACHE_ASSET_SAFETY_LOADER,[e,n])}i.create=o;function n(e,t,r){if(t===void 0){t=null}if(r===void 0){r=null}puremvc.Facade.getInstance().sendNotification(T.REMOVE_ASSET_SAFETY_LOADER,[e,null,t,r])}i.destroy=n;function a(e,t,r){i.create(i.getRes3dUrlByName(e),t,r)}i.createRes3d=a;function u(e,t,r){i.destroy(i.getRes3dUrlByName(e),t,r)}i.destroyRes3d=u;function l(e,t,r){var o=null;if(t===null){o=suncom.Handler.create(null,function(e){})}else{o=suncom.Handler.create(r,t)}var n=s();C.templets[n]=new _(n,e,o);return n}i.prepare=l;function c(e){if(e>0){var t=suncom.Handler.create(null,f,[e]);suncore.System.addMessage(suncore.ModuleEnum.SYSTEM,suncore.MessagePriorityEnum.PRIORITY_0,t)}return 0}i.release=c;function f(e){var t=C.templets[e]||null;if(t===null){return}delete C.templets[e];t.release()}function d(e,t){var r=C.cacheMap[e]||null;if(suncom.Common.getFileExtension(e)==="sk"){return r.buildArmature(t)}else if(i.isRes3dUrl(e)===true){if(r===null){r=C.cacheMap[e]=Laya.loader.getRes(e)}return Laya.Sprite3D.instantiate(r)}else{return Laya.loader.getRes(e)}}i.createSync=d;function h(e){return i.createSync(i.getRes3dUrlByName(e))}i.createRes3dSync=h;function p(e){w.clearResByUrl(e)}i.clearResByUrl=p;function y(e){if(i.res3dRoot===null){throw Error("请先指定3D资源目录：sunui.Resource.res3dRoot=")}return i.res3dRoot+"/LayaScene_"+e+"/Conventional/"}i.getRes3dPackRoot=y;function $(e){var t=i.res3dRoot+"/LayaScene_";var r="/Conventional/";if(e.indexOf(t)!==0){throw Error("解析3D资源包名失败 url:"+e)}e=e.substr(t.length);var o=e.indexOf(r);if(o===-1){throw Error("解析3D资源包名失败 url:"+e)}return e.substr(0,o)}function E(e){return e.indexOf(i.res3dRoot)===0}i.isRes3dUrl=E;function m(e){return suncom.Common.replacePathExtension(e,"json")}i.getRes3dJsonUrl=m;function v(e){if(typeof e==="object"){return i.getRes3dPackRoot(e.pack)+e.name}else{return i.getRes3dPackRoot(suncom.Common.getFileName(e))+e}}i.getRes3dUrlByName=v})(A=r.Resource||(r.Resource={}));var P;(function(e){var o=[];function r(e){for(var t=o.length-1;t>-1;t--){if(o[t].name===e){return t}}return-1}function t(e,t){var r={name:e,data:t};o.push(r)}e.addHistory=t;function n(e){var t=r(e);if(t>-1){o.splice(t,1)}return t>-1}e.removeHistory=n;function i(e){return r(e)>-1}e.hasHistory=i;function s(){if(o.length>0){return o[o.length-1]}return null}e.pop=s;function a(e){var t=r(e);if(t>-1){return o[t]}return null}e.popByName=a;function u(e){while(o.length>1&&e>0){o.pop();e--}}e.deleteHistories=u})(P=r.SceneHeap||(r.SceneHeap={}));var M;(function(e){var o=[];function t(e){for(var t=0;t<o.length;t++){if(o[t].name===e.name){throw Error("重复注册场景")}}o.push(e)}e.regScene=t;function r(e){for(var t=0;t<o.length;t++){var r=o[t];if(r.name===e){return r}}throw Error("场景配置不存在")}e.getConfigByName=r})(M=r.SceneManager||(r.SceneManager={}));var w;(function(o){function e(e){var t=C.references[e]||0;C.references[e]=t+1}o.lock=e;function t(e){var t=C.references[e]||0;if(t===0){throw Error("尝试解锁不存在的资源 url："+e)}else if(t===1){delete C.references[e];n(e)}else{C.references[e]=t-1}}o.unlock=t;function r(e){var t=C.cacheMap[e]||null;if(t!==null){t.dispose&&t.dispose();t.destroy&&t.destroy();delete C.cacheMap[e]}var r=Laya.loader.getRes(e)||null;if(r===null){Laya.loader.cancelLoadByUrl(e)}else{r.dispose&&r.dispose();r.destroy&&r.destroy();Laya.loader.clearRes(e)}}o.clearResByUrl=r;function n(e){if(A.isRes3dUrl(e)===true&&A.getRes3dJsonUrl(e)===e){var t=i(Laya.loader.getRes(e));for(var r=0;r<t.length;r++){o.clearResByUrl(t[r])}}o.clearResByUrl(e)}function i(e){var t=[];var r=A.getRes3dPackRoot(e.pack);for(var o=0;o<e.files.length;o++){t.push(r+e.files[o])}for(var o=0;o<e.resources.length;o++){t.push(r+e.resources[o])}return t}})(w=r.UrlLocker||(r.UrlLocker={}));function D(e,t){var r=e.split("/");while(t!=null&&r.length>0){var o=r.shift();t=t.getChildByName(o)}return t}r.find=D})(sunui||(sunui={}));